// Test #03. Pass sender != owner for non-text operation. 


"test-00-header.fif" include


"EQAWYHnDf8qmG9mC1CGD1Svf9_9OjWpDgL9EU2fgsTrfH5jG" dup =: sender_address $>smca 0= abort"bad address"
=: sender_flags
=: sender_addr
=: sender_wc

"EQBPgLTB_RHxxXpwLjCUMzHjsvYjdR3dHFfWs765ZpbvOAmn" dup =: owner_address $>smca 0= abort"bad address"
=: owner_flags
=: owner_addr
=: owner_wc

"EQART9XH37phxxDoNGmcKc7t9AS4iR76HPj2Oj0dgSY824RZ" dup =: provider_address $>smca 0= abort"bad address"
=: provider_flags
=: provider_addr
=: provider_wc

<b
   // owner address
   b{100} s,
   owner_wc 8 i,
   owner_addr 256 u,
   0 64 u,        // next_item_index
   <b b> ref,     // content
   <b b> ref,     // nft_item_code
   <b b> ref,     // royalty_params
   <b
      10 8 u,        // sign_max_number
      0 8 u,         // sign_number
      0 Gram,        // sign_deploy_fee
      0 Gram,        // sign_commit_fee
      0 Gram,        // min_stake
      // sign_provider_address
      b{100} s,
      provider_wc 8 i,
      provider_addr 256 u,
      <b b> ref,     // sign_request_code
      dictnew dict,  // signatures
   b> ref,
b> =: state

<b 
   // flags: int_msg_info, ihr_disabled, bounce, bounced
   b{0100} s,
   
   // sender address
   b{100} s,
   sender_wc 8 i,
   sender_addr 256 u,
b> =: in_msg_full

<b
   1 32 u,   // op code
   0 64 u,   // query_id
b> <s =: in_msg_body

in_msg_full
in_msg_body
recv_internal 
code
state
c7 
runvmctx 

=: state
=: exit_code

exit_code 401 "Wrong exit code: 401 expected" ASSERT_EQUAL_INTS

exit_code ."Exit code " exit_code .dump cr