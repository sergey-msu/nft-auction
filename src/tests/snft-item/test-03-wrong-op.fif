// Test #03. Pass sender != owner for non-text operation. 


"test-00-header.fif" include


"EQD8YZxRk1uxBKkxlcXjgk5zQkXAx-xYDzpsh4SS49e7geHV" dup =: collection_address $>smca 0= abort"bad address"
=: collection_flags
=: collection_addr
=: collection_wc

"EQBPgLTB_RHxxXpwLjCUMzHjsvYjdR3dHFfWs765ZpbvOAmn" dup =: owner_address $>smca 0= abort"bad address"
=: owner_flags
=: owner_addr
=: owner_wc

"EQDidTtWXL-t5Xad0kKGjIFc7NSeqMQ5cbn0uxZnNwqxGtAM" dup =: other_address $>smca 0= abort"bad address"
=: other_flags
=: other_addr
=: other_wc

"EQART9XH37phxxDoNGmcKc7t9AS4iR76HPj2Oj0dgSY824RZ" dup =: provider_address $>smca 0= abort"bad address"
=: provider_flags
=: provider_addr
=: provider_wc


<b
   3 64 u, // index
   b{100} s, collection_wc 8 i, collection_addr 256 u,  // collection address
   b{100} s, owner_wc 8 i, owner_addr 256 u,  // owner address
   <b b> ref, // content
   <b
      10 8 u,        // sign_max_number
      0 8 u,         // sign_number
      0 Gram,        // sign_deploy_fee
      0 Gram,        // sign_commit_fee
      0 Gram,        // min_stake
      b{100} s, provider_wc 8 i, provider_addr 256 u, // sign_provider_address
      <b b> ref,     // sign_request_code
      dictnew dict,  // signatures
   b> ref,
b> =: state

<b 
   b{0100} s,  // flags: int_msg_info, ihr_disabled, bounce, bounced
   b{100} s, other_wc 8 i, other_addr 256 u,  // sender address
   b{00} s, // dst
   0 Gram,  // value
   b{0} s,    // extra currency
   0 Gram,  // ihr_fee
   0 Gram,  // fwd_fee
b> =: in_msg_full

<b
   1 32 u,   // op code
   0 64 u,   // query_id
b> <s =: in_msg_body

my_balance
msg_value
in_msg_full
in_msg_body
recv_internal
code
state
c7
runvmctx 

=: state
=: exit_code

exit_code 65535 "Wrong exit code: 401 expected" ASSERT_EQUAL_INTS

exit_code ."Exit code " exit_code .dump cr 